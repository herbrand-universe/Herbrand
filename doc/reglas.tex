\documentclass[a4paper]{article}
\usepackage{bussproofs}
\usepackage{amsmath,amssymb}


\newcommand{\whnf}{\ensuremath{\twoheadrightarrow_{wh}}}
\begin{document}

\title{Herbrand: Type checking rules}

\maketitle


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Rules
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Rules}

\begin{align}
  \AxiomC{}
  \tag{KindRule 1}
  \UnaryInfC{$\Gamma \vdash Prop : Type_{0}$}
  \DisplayProof
\end{align}

\begin{align*}
  \AxiomC{}
  \tag{KindRule 2}
  \UnaryInfC{$\Gamma \vdash Type_{i} : Type_{i+1} $}
  \DisplayProof
\end{align*}

\begin{align}
  \AxiomC{$x : A \in \Gamma$}
  \tag{VarRule}
  \UnaryInfC{$\Gamma \vdash x : A $}
  \DisplayProof
\end{align}

\begin{align}
  \AxiomC{$\Gamma \vdash M_{1} : T_{1} \quad T_{1} \whnf K $}
  \AxiomC{$\Gamma, x:M_{1} \vdash M_{2} : T_{2} $}
  \tag{$\lambda$-Rule}
  \BinaryInfC{$\Gamma \vdash \lambda x : M_{1} , M_{2} \; : \; \Pi x : M_{1}, T_{2} $}
  \DisplayProof
\end{align}

\begin{align}
  \AxiomC{$\Gamma \vdash M_{1} : T_{1} \quad T_{1} \whnf \Pi x : A, B $}
  \AxiomC{$\Gamma \vdash M_{2} : A' \quad A' \leq A $}
  \tag{App-Rule1}
  \BinaryInfC{$\Gamma \vdash M_{1} M_{2} \; : \; [M_{2}/x]B $}
  \DisplayProof
\end{align}


\begin{align}
  \AxiomC{$\Gamma \vdash M_{1} : T_{1} \quad T_{1} \whnf K $}
  \AxiomC{$\Gamma, x:M_{1} \vdash M_{2} : T_{2} \quad T_{2} \whnf Prop $}
  \tag{$\Pi$-Rule1}
  \BinaryInfC{$\Gamma \vdash \Pi x : M_{1} , M_{2} \; : \; Prop $}
  \DisplayProof
\end{align}


\begin{align}
  \AxiomC{$\Gamma \vdash M_{1} : T_{1} \quad T_{1} \whnf K $}
  \AxiomC{$\Gamma, x:M_{1} \vdash M_{2} : T_{2} \quad T_{2} \whnf K' $}
  \tag{$\Pi$-Rule2}
  \BinaryInfC{$\Gamma \vdash \Pi x : M_{1} , M_{2} \; : \; max_{\leq}\{K,K'\} $}
  \DisplayProof
\end{align}


\begin{align}
  \AxiomC{$\Gamma \vdash M_{1} : T_{1} \quad T_{1} \whnf K $}
  \AxiomC{$\Gamma, x:M_{1} \vdash M_{2} : T_{2} \quad T_{2} \whnf K' $}
  \tag{$\Sigma$-Rule}
  \BinaryInfC{$\Gamma \vdash \Sigma x : M_{1} , M_{2} \; : \; max_{\leq}\{K,K',Type_{0}\} $}
  \DisplayProof
\end{align}




\begin{align}
\AxiomC{$C \equiv \Sigma x : A, B \quad \Gamma \vdash C : T \quad T \whnf K $}
\noLine
\UnaryInfC{$\Gamma \vdash M_{1} : T_{1} \quad T_{1} \leq A \quad \Gamma \vdash M_{2} : T_{2} \quad T_{2} \leq [M_{1}/x]B $}
\tag{Pair-Rule}
\UnaryInfC{$\Gamma \vdash pair_{C} (M_{1},M_{2}) \; : \; C $}
\DisplayProof
\end{align}



\begin{align}
\AxiomC{$\Gamma \vdash M : T$}
\AxiomC{$ T \whnf \Sigma x : A , B $}
\tag{$\pi_{1}$-Rule}
\BinaryInfC{$\Gamma \vdash \pi_{1} (M) \; : \; A $}
\DisplayProof
\end{align}

\begin{align}
\AxiomC{$\Gamma \vdash M : T$}
\AxiomC{$ T \whnf \Sigma x : A , B $}
\tag{$\pi_{2}$-Rule}
\BinaryInfC{$\Gamma \vdash \pi_{2} (M) \; : \; [\pi_{1}(M)/x] B $}
\DisplayProof
\end{align}


\paragraph{Reglas de ECC no dirigidas por sintaxis}
Si bien hay una por cada construcci\'on falta pensar el tema de $\leq$.


\paragraph{}{\bf The Extended Calculus of Constructions with Inductive Types (Ore)}


\begin{align}
\tag{$+$ Rule}
\AxiomC{$\Gamma \vdash A : Type_{j}$}
\AxiomC{$\Gamma \vdash B : Type_{j}$}
\BinaryInfC{$\Gamma \vdash A + B : Type_{j}$}
\DisplayProof
\end{align}

\begin{align}
\tag{$inl$-Rule}
\AxiomC{$\Gamma \vdash L : A$}
\AxiomC{$\Gamma \vdash A : Type_{j} $}
\AxiomC{$\Gamma \vdash B : Type_{j} $}
\TrinaryInfC{$\Gamma \vdash inl_{A+B} L : A + B$}
\DisplayProof
\end{align}

\begin{align}
\tag{$inr$-Rule}
\AxiomC{$\Gamma \vdash L : B$}
\AxiomC{$\Gamma \vdash A : Type_{j} $}
\AxiomC{$\Gamma \vdash B : Type_{j} $}
\TrinaryInfC{$\Gamma \vdash inr_{A+B} L : A + B$}
\DisplayProof
\end{align}


\begin{align}
\tag{$Case$-Rule}
\AxiomC{$\Gamma, x : A + B \vdash C : Type_{j}$}
\noLine
\UnaryInfC{$\Gamma, x : A + B \vdash M : \Pi y : A. [inl\; y/x] C$}
\noLine
\UnaryInfC{$\Gamma, x : A + B \vdash N : \Pi y : B. [inr\; y/x] C$}
\UnaryInfC{$\Gamma, x : A+B \vdash case(x,M,N) : C $}
\DisplayProof
\end{align}

\paragraph{?`Como mierda queda cuando uno distribuye conv y cum?}

\paragraph{}Creo que en las reglas inr-Rule y inl-Rule, se puede cambiar esto:
\begin{center}
$\Gamma \vdash A : Type_{j} \quad \Gamma \vdash B : Type_{j} $
\end{center}

por esto:

\begin{center}
$\Gamma \vdash A + B : Type_{j}$
\end{center}

\paragraph{Creo que las leyes pueden ser estas:}

\begin{align}
\tag{$+$ Rule}
\AxiomC{$\Gamma \vdash A : T_{1} \quad T_{1} \whnf K$}
\AxiomC{$\Gamma \vdash B : T_{2} \quad T_{2} \whnf K'$}
\BinaryInfC{$\Gamma \vdash A + B : max_{\leq} \{Type_{0},K,K'\}$}
\DisplayProof
\end{align}


\begin{align}
\tag{$inl$-Rule}
\AxiomC{$C \equiv A + B$}
\AxiomC{$\Gamma \vdash L : T \quad T \leq A$}
\AxiomC{$\Gamma \vdash C : T_{1} \quad T_{1} \whnf Type_{j} $}
\TrinaryInfC{$\Gamma \vdash inl_{C} \; L : C$}
\DisplayProof
\end{align}

\begin{align}
\tag{$inl$-Rule}
\AxiomC{$C \equiv A + B$}
\AxiomC{$\Gamma \vdash L : T \quad T \leq B$}
\AxiomC{$\Gamma \vdash C : T_{1} \quad T_{1} \whnf Type_{j} $}
\TrinaryInfC{$\Gamma \vdash inr_{C} \; L : C$}
\DisplayProof
\end{align}


\begin{align}
\tag{Case-Rule}
\end{align}

\end{document}



\begin{align}
\tag{}
\AxiomC{}
\UnaryInfC{}
\DisplayProof
\end{align}
